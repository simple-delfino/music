language: node_js
node_js:
  - "8"

install:
  - npm install

script:
  - npm run build

after_success:
  - cd ./dist
  - git init
  - git config --global user.name "simple-delfino"
  - git config --global user.email "1319879149@qq.com"
  - git add .
  - git commit -m "Automatically update from travis-ci"
  - git push -f https://920f496a6b48578948977bdc0083a28dc386696c@github.com/simple-delfino/music.git master:gh-pages

branches:
  only:
    - master

deploy:
  provider: pages
  skip_cleanup: true
  github_token: 920f496a6b48578948977bdc0083a28dc386696c 
  keep_history: true
  on:
    branch: master
